# EXIP API :file_folder:

This directory contains the source code for the CRUD API used in the EXIP (Export Insurance Policies) application. The API is built using [KeystoneJS](https://keystonejs.com/), a powerful Node.js framework.

## Prerequisites :gear:

To set up and run the API locally, you'll need the following prerequisites:

- Node.js version 16.17.0 or higher along with the corresponding `npm` package manager.
- An empty MySQL database.
- An `.env` file that contains the necessary environment variables. You can use `.env.sample` as a template. These variables are required for running the API.
- The `DATABASE_URL` environment variable should be configured to point to your local MySQL database, for example: `mysql://root:@localhost:1234/db-name`.
- Run `npm install` in this directory to install the required dependencies.

:warning: Please note that there might be an issue with Keystone and `npm install` due to duplicate GraphQL versions. As a temporary workaround, GraphQL overrides are included in the `package.json` file.

## Running Locally :computer:

Follow these steps to run the API locally:

1. Execute `npm run dev` or `npm run build && npm run start`.
2. The GraphQL API will be accessible at [http://localhost:5001/api/graphql](http://localhost:5001/api/graphql).

A GraphQL playground is also set up at the same URL, which allows you to interact with and explore the API.

## Using the Keystone Admin UI :rocket:

When you run the API/Keystone for the first time, you'll need to create a new user. This user creation process grants you administrative rights within the Keystone admin UI. This UI can be a valuable tool for managing and interacting with your data.

## Files That Should Not Be Changed :no_entry:

Please be aware that the following files are automatically generated by Keystone and should not be modified manually:

- `/schema.graphql`: This file defines the GraphQL schema for your API.
- `/schema.prisma`: It contains the schema configuration for Prisma, a database toolkit.

These files are essential for the functioning of your Keystone-based API, and any changes should be made through appropriate Keystone configurations and not by editing these files directly.

## Documentation

This GraphQL API can generate documentation by using [spectaql](https://github.com/anvilco/spectaql).

The config file (`/documentation/config.yml`) reads the GraphQL schema (generated by Keystone) and generates a simple documentation UI.

To generate the documentation:

```shell
npm run documentation
```

If you have any specific questions or need further guidance related to this API or KeystoneJS, please feel free to ask.

---


