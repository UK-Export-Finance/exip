{"version":3,"file":"cookies.js","mappings":"qBAAA,MAAMA,EAAaC,SAASC,cAAc,YACpCC,EAAeF,SAASC,cAAc,wBACtCE,EAAeH,SAASC,cAAc,6BACtCG,EAAeJ,SAASC,cAAc,6BACtCI,EAA4BL,SAASC,cAAc,iCAGnDK,EAFoC,UAA5BC,OAAOC,SAASC,SAEH,2BAA6B,kBAElDC,EAAaA,KACjB,MAAMC,EAAO,IAAIC,KAGXC,EAASF,EAAKG,QAAQH,EAAKI,UAAY,GAI7C,MAAO,WAFW,IAAIH,KAAKC,GAAQG,cAEH,IAAI,EAGhCC,EAASA,IACN,UAAYV,OAAOC,SAASU,SAG/BC,EAAqBA,KACzBnB,SAASoB,OAASd,EAAa,4CAA8CI,IAAeO,GAAQ,EAGhGI,EAAqBA,KACzBrB,SAASoB,OAASd,EAAa,2CAA6CI,IAAeO,GAAQ,EAGjGb,GACFA,EAAakB,iBAAiB,SAAS,SAAUC,GAC/CJ,GACF,IAGEhB,GACFA,EAAamB,iBAAiB,SAAS,SAAUC,GAC/CF,GACF,IAGGrB,SAASoB,OAAOI,SAASlB,KAC5BJ,EAAauB,gBAAgB,UAG7BvB,EAAawB,aAAa,WAAY,MACtCxB,EAAayB,QACbzB,EAAaoB,iBAAiB,QAAQ,KACpCpB,EAAauB,gBAAgB,WAAW,KAIxC1B,GACFA,EAAWuB,iBAAiB,SAAS,SAAUC,GAC7CrB,EAAawB,aAAa,SAAU,UACpCH,EAAMK,gBACR,IAGEvB,GACFA,EAA0BiB,iBAAiB,SAAS,SAAUC,GAE5D,GADiBvB,SAASC,cAAc,yCAC1B,CACZ,MAAM4B,EAAS7B,SAASC,cAAc,yCAAyC6B,MAEhE,WAAXD,GACFV,IAGa,WAAXU,GACFR,GAEJ,CACF,K","sources":["webpack://EXIP/./scripts/cookies.js"],"sourcesContent":["const hideButton = document.querySelector('.js-hide');\r\nconst cookieBanner = document.querySelector('.govuk-cookie-banner');\r\nconst acceptButton = document.querySelector('.js-cookies-button-accept');\r\nconst rejectButton = document.querySelector('.js-cookies-button-reject');\r\nconst changeCookiesSubmitButton = document.querySelector('.change-cookies-submit-button');\r\nconst https = window.location.protocol == 'https:';\r\n// `__Secure` prefix will only work with Secure flag i.e. HTTPS\r\nconst cookieName = https ? '__Secure-optionalCookies' : 'optionalCookies';\r\n\r\nconst expiryDate = () => {\r\n  const date = new Date();\r\n\r\n  // 1 day.\r\n  const oneDay = date.setDate(date.getDate() + 1);\r\n\r\n  const utcString = new Date(oneDay).toUTCString();\r\n\r\n  return 'expires=' + utcString + '; ';\r\n};\r\n\r\nconst domain = () => {\r\n  return 'domain=' + window.location.hostname;\r\n};\r\n\r\nconst createRejectCookie = () => {\r\n  document.cookie = cookieName + '=false; path=/; SameSite=Strict; secure; ' + expiryDate() + domain();\r\n};\r\n\r\nconst createAcceptCookie = () => {\r\n  document.cookie = cookieName + '=true; path=/; SameSite=Strict; secure; ' + expiryDate() + domain();\r\n};\r\n\r\nif (rejectButton) {\r\n  rejectButton.addEventListener('click', function (event) {\r\n    createRejectCookie();\r\n  });\r\n}\r\n\r\nif (acceptButton) {\r\n  acceptButton.addEventListener('click', function (event) {\r\n    createAcceptCookie();\r\n  });\r\n}\r\n\r\nif (!document.cookie.includes(cookieName)) {\r\n  cookieBanner.removeAttribute('hidden');\r\n\r\n  // Shift focus to the banner\r\n  cookieBanner.setAttribute('tabindex', '-1');\r\n  cookieBanner.focus();\r\n  cookieBanner.addEventListener('blur', () => {\r\n    cookieBanner.removeAttribute('tabindex');\r\n  });\r\n}\r\n\r\nif (hideButton) {\r\n  hideButton.addEventListener('click', function (event) {\r\n    cookieBanner.setAttribute('hidden', 'hidden');\r\n    event.preventDefault();\r\n  });\r\n}\r\n\r\nif (changeCookiesSubmitButton) {\r\n  changeCookiesSubmitButton.addEventListener('click', function (event) {\r\n    const checkbox = document.querySelector('input[name=\"optionalCookies\"]:checked');\r\n    if (checkbox) {\r\n      const answer = document.querySelector('input[name=\"optionalCookies\"]:checked').value;\r\n\r\n      if (answer === 'reject') {\r\n        createRejectCookie();\r\n      }\r\n\r\n      if (answer === 'accept') {\r\n        createAcceptCookie();\r\n      }\r\n    }\r\n  });\r\n}\r\n"],"names":["hideButton","document","querySelector","cookieBanner","acceptButton","rejectButton","changeCookiesSubmitButton","cookieName","window","location","protocol","expiryDate","date","Date","oneDay","setDate","getDate","toUTCString","domain","hostname","createRejectCookie","cookie","createAcceptCookie","addEventListener","event","includes","removeAttribute","setAttribute","focus","preventDefault","answer","value"],"sourceRoot":""}