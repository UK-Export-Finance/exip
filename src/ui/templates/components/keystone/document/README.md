# Keystone Document Renderer :page_with_curl:

This component consumes data generated by a Keystone rich text editor/[document field](https://keystonejs.com/docs/guides/document-fields) and renders GOV design components. :clipboard:

## How to use :rocket:

1. Setup an API call in your client to call the relevant Keystone endpoint.
2. Pass this data as a variable to a Nunjucks page.
3. In your Nunjucks template, import and call `keystoneDocument`. :computer:

## Example :page_facing_up:

Assuming you can fetch the data from the Keystone API, for example: :calling:

```js
const getKeystonePage = async (pageId) => {
  const config = {
    method: 'GET',
    url: `https://localhost:5001/api/graphql?query={page(where: { id: "${pageId}" }) {heading, content {document}}}`,
    headers: {
      'Content-Type': 'application/json',
    },
  };

  const response = await axios(config);

  return response.data.data.page;
};
```

You can then call this in a GET endpoint and pass the data to a nunjucks page:

```js
const get = async (req, res) => {
  const keystoneData = await getKeystonePage('PAGE_ID');

  return res.render('about-page.njk', {
    keystoneData,
  });
};
```

Finally, import and call the `keystoneDocument` nunjucks component in that page:

```html
{% import '../components/keystone/document/index.njk' as keystoneDocument %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters-from-desktop">{{ keystoneDocument.render({ document: keystoneData.content.document }) }}</div>
</div>
```

---
