# Keystone document renderer

This component consumes data generated by a Keystone rich text editor/[document field](https://keystonejs.com/docs/guides/document-fields) and renders GOV design components.

## How to use

1. Setup an API call in your client to call the relevant keystone endpoint.
2. Pass this data as a variable to a nunjucks page.
3. In your nunjucks template, import and call `keystoneDocument`.

## Example

Providing you can fetch the data from Keystone API, e.g:

```js
const getKeystonePage = async (pageId) => {
  const config = {
    method: 'GET',
    url: `http://localhost:3000/api/graphql?query={page(where: { id: "${pageId}" }) {heading, content {document}}}`,
    headers: {
      'Content-Type': 'application/json',
    },
  };

  const response = await axios(config);

  return response.data.data.page;
};
```

You can then call this in a GET endpoint and pass the data to the nunjucks page:

```js
const get = async (req, res) => {
  const keystoneData = await getKeystonePage('PAGE_ID');

  return res.render('about-page.njk', {
    keystoneData,
  });
};
```

Finally, import and call the `keystoneDocument` nunjuck component in that page:

```html
{% import '../components/keystone/document/index.njk' as keystoneDocument %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters-from-desktop">{{ keystoneDocument.render({ document: keystoneData.content.document }) }}</div>
</div>
```
