{% from "govuk/components/input/macro.njk" import govukInput %}

{% macro render(params) %}

  {% set ADDRESS_LINE_ONE_FIELD = params.addressLineOne %}
  {% set ADDRESS_LINE_TWO_FIELD = params.addressLineTwo %}
  {% set COUNTY_FIELD = params.country %}
  {% set TOWN_FIELD = params.town %}
  {% set POSTCODE_FIELD = params.postcode %}
  {% set validationErrors = params.validationErrors %}
  {% set application = params.application %}
  {% set submittedValues = params.submittedValues %}

  {{ govukInput({
    id: ADDRESS_LINE_ONE_FIELD.ID,
    name: ADDRESS_LINE_ONE_FIELD.ID,
    value: submittedValues[ADDRESS_LINE_ONE_FIELD.ID] or application[ADDRESS_LINE_ONE_FIELD.ID],
    label: {
      text: ADDRESS_LINE_ONE_FIELD.LABEL,
      classes: "govuk-body govuk-!-font-weight-bold",
      attributes: {
        "data-cy": ADDRESS_LINE_ONE_FIELD.ID + "-label"
      }
    },
    classes: "govuk-input--width-20",
    attributes: {
      "data-cy": ADDRESS_LINE_ONE_FIELD.ID
    },
    errorMessage: validationErrors.errorList[ADDRESS_LINE_ONE_FIELD.ID] and {
      text: validationErrors.errorList[ADDRESS_LINE_ONE_FIELD.ID].text,
      attributes: {
        "data-cy": ADDRESS_LINE_ONE_FIELD.ID + "-error"
      }
    }
  }) }}

  {{ govukInput({
    id: ADDRESS_LINE_TWO_FIELD.ID,
    name: ADDRESS_LINE_TWO_FIELD.ID,
    value: submittedValues[ADDRESS_LINE_TWO_FIELD.ID] or application[ADDRESS_LINE_TWO_FIELD.ID],
    label: {
      text: ADDRESS_LINE_TWO_FIELD.LABEL,
      classes: "govuk-body govuk-!-font-weight-bold",
      attributes: {
        "data-cy": ADDRESS_LINE_TWO_FIELD.ID + "-label"
      }
    },
    classes: "govuk-input--width-20",
    attributes: {
      "data-cy": ADDRESS_LINE_TWO_FIELD.ID
    },
    errorMessage: validationErrors.errorList[ADDRESS_LINE_TWO_FIELD.ID] and {
      text: validationErrors.errorList[ADDRESS_LINE_TWO_FIELD.ID].text,
      attributes: {
        "data-cy": ADDRESS_LINE_TWO_FIELD.ID + "-error"
      }
    }
  }) }}

  {{ govukInput({
    id: TOWN_FIELD.ID,
    name: TOWN_FIELD.ID,
    value: submittedValues[TOWN_FIELD.ID] or application[TOWN_FIELD.ID],
    label: {
      text: TOWN_FIELD.LABEL,
      classes: "govuk-body govuk-!-font-weight-bold",
      attributes: {
        "data-cy": TOWN_FIELD.ID + "-label"
      }
    },
    classes: "govuk-input--width-20",
    attributes: {
      "data-cy": TOWN_FIELD.ID
    },
    errorMessage: validationErrors.errorList[TOWN_FIELD.ID] and {
      text: validationErrors.errorList[TOWN_FIELD.ID].text,
      attributes: {
        "data-cy": TOWN_FIELD.ID + "-error"
      }
    }
  }) }}

  {{ govukInput({
    id: COUNTY_FIELD.ID,
    name: COUNTY_FIELD.ID,
    value: submittedValues[COUNTY_FIELD.ID] or application[COUNTY_FIELD.ID],
    label: {
      text: COUNTY_FIELD.LABEL,
      classes: "govuk-body govuk-!-font-weight-bold",
      attributes: {
        "data-cy": COUNTY_FIELD.ID + "-label"
      }
    },
    classes: "govuk-input--width-20",
    attributes: {
      "data-cy": COUNTY_FIELD.ID
    },
    errorMessage: validationErrors.errorList[COUNTY_FIELD.ID] and {
      text: validationErrors.errorList[COUNTY_FIELD.ID].text,
      attributes: {
        "data-cy": COUNTY_FIELD.ID + "-error"
      }
    }
  }) }}

  {{ govukInput({
    id: POSTCODE_FIELD.ID,
    name: POSTCODE_FIELD.ID,
    value: 'Do not test yet',
    label: {
      text: POSTCODE_FIELD.LABEL,
      classes: "govuk-body govuk-!-font-weight-bold",
      attributes: {
        "data-cy": POSTCODE_FIELD.ID + "-label"
      }
    },
    classes: "govuk-input--width-20",
    attributes: {
      "data-cy": POSTCODE_FIELD.ID
    },
    errorMessage: validationErrors.errorList[POSTCODE_FIELD.ID] and {
      text: validationErrors.errorList[POSTCODE_FIELD.ID].text,
      attributes: {
        "data-cy": POSTCODE_FIELD.ID + "-error"
      }
    }
  }) }}
{% endmacro %}
