const checkAutocompleteInput = {
  hasWorkingClientSideJS: (field) => {
    field.input().should('have.class', 'autocomplete__input');
  },
  rendersInput: (field) => {
    field.input().should('exist');
  },
  rendersNoResultsMessage: (field, input) => {
    cy.keyboardInput(field.input(), input);

    const noResults = field.noResults();
    noResults.should('exist');

    // this text is generated by external component.
    cy.checkText(noResults, 'No results found');
  },
  rendersSingleResult: (field, input) => {
    // start searching for a country
    cy.keyboardInput(field.input(), input);

    const noResults = field.noResults();
    noResults.should('not.exist');

    const results = field.results();

    results.should('have.length', 1);
  },
  rendersMultipleResults: (field) => {
    cy.keyboardInput(field.input(), 'Be');

    const noResults = field.noResults();
    noResults.should('not.exist');

    const results = field.results();

    results.should('have.length.greaterThan', 1);
  },
  allowsUserToRemoveCountryAndSearchAgain: (field, input, input2) => {
    cy.keyboardInput(field.input(), input);
    const results = field.results();

    // select the first result
    results.first().click();

    // clear the input
    field.input().clear();

    // search for a different country, submit with enter key
    cy.keyboardInput(field.input(), `${input2}{enter}`);

    // check hidden input value
    const expectedValue = input2;

    cy.checkText(field.results(), expectedValue);
  },
};

export default checkAutocompleteInput;
